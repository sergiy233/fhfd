<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StyleStore - Checkout</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        
        header { display: flex; justify-content: space-between; align-items: center; max-width: 900px; margin: 0 auto 20px; }
        .back-link { text-decoration: none; color: var(--primary); font-weight: bold; }

        /* Перемикач мов */
        .lang-switcher { display: flex; gap: 5px; }
        .lang-btn { cursor: pointer; border: 1px solid #ddd; background: white; padding: 5px 10px; border-radius: 5px; }
        .lang-btn.active { background: var(--primary); color: white; }

        .checkout-container { max-width: 900px; margin: auto; display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 30px; }
        @media(max-width: 768px) { .checkout-container { grid-template-columns: 1fr; } }

        .box { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        
        .cart-item { display: flex; gap: 10px; border-bottom: 1px solid #eee; padding: 10px 0; align-items: center; }
        .cart-item img { width: 50px; height: 50px; object-fit: cover; border-radius: 5px; }
        
        .total-row { display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2em; margin-top: 20px; border-top: 2px solid #eee; padding-top: 10px; }
        .submit-btn { background: var(--accent); color: white; width: 100%; padding: 15px; border: none; border-radius: 5px; font-size: 1.1em; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="back-link" id="lang-back">← Назад до магазину</a>
    <div class="lang-switcher">
        <button class="lang-btn" id="btn-ua" onclick="changeLang('ua')">UA</button>
        <button class="lang-btn" id="btn-en" onclick="changeLang('en')">EN</button>
    </div>
</header>

<div class="checkout-container">
    <div class="box">
        <h2 id="lang-order-title">Оформлення замовлення</h2>
        <form id="orderForm" onsubmit="submitOrder(event)">
            <div class="form-group">
                <label id="lang-label-name">Ваше ім'я *</label>
                <input type="text" id="input-name" required>
            </div>
            <div class="form-group">
                <label id="lang-label-phone">Телефон *</label>
                <input type="tel" id="input-phone" required>
            </div>
            <div class="form-group">
                <label id="lang-label-city">Місто *</label>
                <input type="text" id="input-city" required>
            </div>
            <div class="form-group">
                <label id="lang-label-delivery">Спосіб доставки</label>
                <select id="select-delivery">
                    </select>
            </div>
            <button class="submit-btn" id="lang-submit">ПІДТВЕРДИТИ ЗАМОВЛЕННЯ</button>
        </form>
    </div>

    <div class="box">
        <h2 id="lang-cart-title">Ваш кошик</h2>
        <div id="cartList"></div>
        <div class="total-row">
            <span id="lang-total-text">Разом:</span>
            <span id="totalSum">0 грн</span>
        </div>
    </div>
</div>

<script>
    const translations = {
        ua: {
            back: "← Назад до магазину",
            orderTitle: "Оформлення замовлення",
            cartTitle: "Ваш кошик",
            name: "Ваше ім'я *",
            phone: "Телефон *",
            city: "Місто *",
            delivery: "Спосіб доставки",
            deliveryOptions: ["Нова Пошта", "Укрпошта", "Самовивіз"],
            submit: "ПІДТВЕРДИТИ ЗАМОВЛЕННЯ",
            total: "Разом:",
            currency: "грн",
            empty: "Кошик порожній",
            success: "Дякуємо! Замовлення оформлено."
        },
        en: {
            back: "← Back to shop",
            orderTitle: "Checkout",
            cartTitle: "Your Cart",
            name: "Your Name *",
            phone: "Phone Number *",
            city: "City *",
            delivery: "Delivery Method",
            deliveryOptions: ["Nova Poshta", "Ukrposhta", "Pickup"],
            submit: "CONFIRM ORDER",
            total: "Total:",
            currency: "UAH",
            empty: "Cart is empty",
            success: "Thank you! Order placed successfully."
        }
    };

    function changeLang(lang) {
        localStorage.setItem('siteLang', lang);
        
        // Оновлення активної кнопки
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`btn-${lang}`).classList.add('active');

        // Переклад текстів
        const t = translations[lang];
        document.getElementById('lang-back').innerText = t.back;
        document.getElementById('lang-order-title').innerText = t.orderTitle;
        document.getElementById('lang-cart-title').innerText = t.cartTitle;
        document.getElementById('lang-label-name').innerText = t.name;
        document.getElementById('lang-label-phone').innerText = t.phone;
        document.getElementById('lang-label-city').innerText = t.city;
        document.getElementById('lang-label-delivery').innerText = t.delivery;
        document.getElementById('lang-submit').innerText = t.submit;
        document.getElementById('lang-total-text').innerText = t.total;

        // Переклад випадаючого списку
        const select = document.getElementById('select-delivery');
        select.innerHTML = t.deliveryOptions.map(opt => `<option>${opt}</option>`).join('');

        loadCart(); // Перевантажуємо кошик для зміни валюти
    }

    function loadCart() {
        const lang = localStorage.getItem('siteLang') || 'ua';
        const cart = JSON.parse(localStorage.getItem('styleCart')) || [];
        const container = document.getElementById('cartList');
        let total = 0;

        if(cart.length === 0) {
            container.innerHTML = `<p>${translations[lang].empty}</p>`;
            document.getElementById('totalSum').innerText = `0 ${translations[lang].currency}`;
            return;
        }

        container.innerHTML = cart.map((item, index) => {
            total += item.price;
            return `
                <div class="cart-item">
                    <img src="${item.img}">
                    <div style="flex-grow:1"><b>${item.id}</b></div>
                    <div>${item.price}</div>
                </div>`;
        }).join('');
        
        document.getElementById('totalSum').innerText = `${total} ${translations[lang].currency}`;
    }

    function submitOrder(e) {
        e.preventDefault();
        const lang = localStorage.getItem('siteLang') || 'ua';
        alert(translations[lang].success);
        localStorage.removeItem('styleCart');
        window.location.href = "index.html";
    }

    window.onload = () => {
        const savedLang = localStorage.getItem('siteLang') || 'ua';
        changeLang(savedLang);
    };
</script>

</body>
</html>
